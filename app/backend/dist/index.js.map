{"version":3,"file":"index.js","sources":["../src/settings.ts","../src/apis/server/index.ts","../src/apis/mongo/index.ts","../src/helpers/player/getXpRequired.ts","../src/apis/eos/index.ts","../src/helpers/player/checkLevelUp.ts","../src/helpers/player/getSocketIds.ts","../src/helpers/player/isDeckValid.ts","../src/requests/auth/disconnect.ts","../src/requests/auth/getPrivateKeyHash.ts","../src/requests/auth/signin.ts","../src/requests/auth/signup.ts","../src/requests/auth/index.ts","../src/requests/client/destroyLobby.ts","../src/requests/client/getLeaderboardsByLevel.ts","../src/helpers/game/buildDeck.ts","../src/helpers/game/endGame.ts","../src/helpers/game/drawCard.ts","../src/helpers/game/generateGame.ts","../src/helpers/game/generateGameFe.ts","../src/helpers/game/getGame.ts","../src/helpers/game/getPlayers.ts","../src/helpers/game/isGameOver.ts","../src/helpers/game/playMinion.ts","../src/helpers/game/saveGame.ts","../src/helpers/game/startGame.ts","../src/helpers/game/triggerEffect/charge.ts","../src/helpers/game/triggerEffect/mirrorsEdge.ts","../src/helpers/game/triggerEffect/multiStrike.ts","../src/helpers/game/triggerEffect/necro.ts","../src/helpers/game/triggerEffect/quickShot.ts","../src/helpers/game/triggerEffect/smite.ts","../src/helpers/game/triggerEffect/spellweave.ts","../src/helpers/game/triggerEffect/index.ts","../src/helpers/game/index.ts","../src/requests/client/joinCasualQueue.ts","../src/requests/client/joinLobby.ts","../src/requests/client/joinRankedQueue.ts","../src/requests/client/leaveCasualQueue.ts","../src/requests/client/leaveLobby.ts","../src/requests/client/leaveRankedQueue.ts","../src/requests/client/makeLobby.ts","../src/requests/client/saveDeck.ts","../src/requests/client/selectDeck.ts","../src/requests/client/sendToken.ts","../src/requests/client/setDeckKlass.ts","../src/requests/client/setDeckName.ts","../src/requests/client/startCustomGame.ts","../src/requests/client/index.ts","../src/requests/game/attackHero.ts","../src/requests/game/attackMinion.ts","../src/requests/game/endTurn.ts","../src/requests/game/hoverCard.ts","../src/requests/game/hoverHandCard.ts","../src/requests/game/playMagic.ts","../src/requests/game/playMinion.ts","../src/requests/game/playTrap.ts","../src/requests/game/unhoverCard.ts","../src/requests/game/unhoverHandCard.ts","../src/requests/game/index.ts","../src/requests/sidenav/acceptFriend.ts","../src/requests/sidenav/addFriend.ts","../src/requests/sidenav/block.ts","../src/requests/sidenav/declineFriend.ts","../src/requests/sidenav/sendChatMsg.ts","../src/requests/sidenav/setAvatar.ts","../src/requests/sidenav/signout.ts","../src/requests/sidenav/unblock.ts","../src/requests/sidenav/unfriend.ts","../src/requests/sidenav/updateStatus.ts","../src/requests/sidenav/index.ts","../src/requests/index.ts","../src/index.ts"],"sourcesContent":["const production = false;\r\n\r\nconst settings = {\r\n  mongo: {\r\n    uri: \"mongodb://localhost:27017\"\r\n  },\r\n  eos: {\r\n    endpoint: \"https://testnet.telos.net\",\r\n    contractAccount: \"somgame11111\",\r\n    contractKey: \"5K52s5CAKU6tEXE6Rnirsjz5SKtWfKBN4H5634MSqMH6huaUAkx\"\r\n  },\r\n  socket: {\r\n    opts: production ? {} : {\r\n      cors: {\r\n        origin: \"*\"\r\n      }\r\n    }\r\n  },\r\n  server: {\r\n    port: 4200\r\n  }\r\n};\r\n\r\nexport default settings;\r\n","import {createServer} from \"http\";\r\nimport {Server} from \"socket.io\";\r\nimport settings from \"settings\";\r\nimport type {SocketResponses} from \"@som/shared/types/responses\";\r\nimport type {SocketRequests} from \"@som/shared/types/requests\";\r\n\r\nconst {socket: {opts}} = settings;\r\nconst httpServer = createServer();\r\nconst ioServer = new Server<SocketRequests, SocketResponses>(httpServer, opts);\r\n\r\nexport {httpServer, ioServer};\r\n","import {MongoClient, type Document} from \"mongodb\";\r\nimport settings from \"settings\";\r\nimport type {Game} from \"models/game\";\r\nimport type {Player} from \"@som/shared/types/mongo\";\r\nimport type {CasualQueuePlayers} from \"./casual-queue-players-db/casual-queue-players-db.types\";\r\nimport type {Chat} from \"./chats-db/chats-db.models\";\r\nimport type {Lobby} from \"./lobbies-db/lobbies-db.models\";\r\n\r\nconst {\r\n  mongo: {uri}\r\n} = settings;\r\n\r\ninterface RankedQueuePlayers extends Document {\r\n  username: string;\r\n  elo: number;\r\n}\r\n\r\nconst mongoClient = await MongoClient.connect(uri);\r\nconst mongoDb = mongoClient.db(\"som\");\r\n\r\nconst casualQueuePlayersDb = mongoDb.collection<CasualQueuePlayers>(\"casualQueuePlayers\");\r\nconst rankedQueuePlayersDb = mongoDb.collection<RankedQueuePlayers>(\"rankedQueuePlayers\");\r\nconst chatsDb = mongoDb.collection<Chat>(\"chats\");\r\nconst gamesDb = mongoDb.collection<Game>(\"games\");\r\nconst lobbiesDb = mongoDb.collection<Lobby>(\"lobbies\");\r\nconst playersDb = mongoDb.collection<Player>(\"players\");\r\n\r\nexport {casualQueuePlayersDb, rankedQueuePlayersDb, chatsDb, gamesDb, lobbiesDb, playersDb};\r\n","const getXpRequired = (lv: number): number => 1000 + (lv % 10) * 100;\r\n\r\nexport {getXpRequired};\r\n","import {Api, JsonRpc} from \"eosjs\";\r\nimport {JsSignatureProvider} from \"eosjs/dist/eosjs-jssig.js\";\r\nimport fetch from \"node-fetch\";\r\nimport settings from \"settings\";\r\n\r\nimport type {\r\n  GetTableRowsResult,\r\n  PushTransactionArgs,\r\n  ReadOnlyTransactResult\r\n} from \"eosjs/dist/eosjs-rpc-interfaces\";\r\n\r\nimport type {TransactResult} from \"eosjs/dist/eosjs-api-interfaces\";\r\n\r\nconst {\r\n  eos: {endpoint, contractKey}\r\n} = settings;\r\n\r\nexport const eosApi = new Api({\r\n  rpc: new JsonRpc(endpoint, {fetch}),\r\n  signatureProvider: new JsSignatureProvider([contractKey]),\r\n  textDecoder: new TextDecoder(),\r\n  textEncoder: new TextEncoder()\r\n});\r\n\r\nconst findGame = async (game_id: number): Promise<any | undefined> => {\r\n  const {contractAccount} = settings.eos;\r\n  let table!: GetTableRowsResult;\r\n\r\n  try {\r\n    table = await eosApi.rpc.get_table_rows({\r\n      code: contractAccount,\r\n      scope: contractAccount,\r\n      table: \"games\",\r\n      lower_bound: game_id,\r\n      upper_bound: game_id,\r\n      limit: 1\r\n    });\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n  return table.rows[0];\r\n};\r\n\r\nconst findLobby = async (lobby_id: number): Promise<any | undefined> => {\r\n  const {contractAccount} = settings.eos;\r\n  let table!: GetTableRowsResult;\r\n\r\n  try {\r\n    table = await eosApi.rpc.get_table_rows({\r\n      code: contractAccount,\r\n      scope: contractAccount,\r\n      table: \"lobbies\",\r\n      lower_bound: lobby_id,\r\n      upper_bound: lobby_id,\r\n      limit: 1\r\n    });\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n  return table.rows[0];\r\n};\r\n\r\nconst findPlayer = async (username: string): Promise<any | undefined> => {\r\n  const {contractAccount} = settings.eos;\r\n  let table!: GetTableRowsResult;\r\n\r\n  try {\r\n    table = await eosApi.rpc.get_table_rows({\r\n      code: contractAccount,\r\n      scope: contractAccount,\r\n      table: \"players\",\r\n      lower_bound: username,\r\n      upper_bound: username,\r\n      limit: 1\r\n    });\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n\r\n  return table.rows[0];\r\n};\r\n\r\n\r\nconst transact = async (action: string, data: object): Promise<TransactResult | ReadOnlyTransactResult | PushTransactionArgs> => {\r\n  const {contractAccount} = settings.eos;\r\n\r\n  return await eosApi.transact({\r\n    actions: [{\r\n      account: contractAccount,\r\n      name: action,\r\n      authorization: [{\r\n        actor: contractAccount,\r\n        permission: \"active\"\r\n      }],\r\n      data\r\n    }]\r\n  }, {\r\n    blocksBehind: 3,\r\n    expireSeconds: 30\r\n  });\r\n};\r\n\r\nexport {findGame, findLobby, findPlayer, transact};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport {getXpRequired} from \"./getXpRequired\";\r\nimport type {Player} from \"@som/shared/types/mongo\";\r\nimport { eosApi } from \"apis/eos\";\r\n\r\nconst checkLevelUp = async (player: Player): Promise<void> => {\r\n  const {username, socketId} = player;\r\n  const xpRequired = getXpRequired(player.lv);\r\n\r\n  if (player.xp <= xpRequired) { return; }\r\n\r\n  const xp = player.xp - xpRequired;\r\n\r\n  await playersDb.updateOne({username}, {\r\n    $inc: {\r\n      lv: 1\r\n    },\r\n    $set: {xp}\r\n  });\r\n\r\n  await eosApi.transact({\r\n    actions: [{\r\n      account: \"somgame11111\",\r\n      name: \"flushtoken\",\r\n      authorization: [{\r\n        actor: \"somgame11111\",\r\n        permission: \"active\"\r\n      }],\r\n      data: {\r\n        username, quantity: \"1 DMTTEST\"\r\n      }\r\n    }]\r\n  }, {\r\n    blocksBehind: 3,\r\n    expireSeconds: 30\r\n  })\r\n\r\n  ioServer.to(socketId).emit(\"levelUp\", {xp});\r\n};\r\n\r\nexport {checkLevelUp};\r\n","import {playersDb} from \"apis/mongo\";\r\n\r\nconst getSocketIds = async (players: string[]): Promise<string[]> => {\r\n  return await playersDb\r\n    .find({username: {$in: players}})\r\n    .project({_id: 0, socketId: 1})\r\n    .map(({socketId}) => socketId)\r\n    .toArray();\r\n};\r\n\r\nexport {getSocketIds};\r\n","import type {PlayerDeck} from \"@som/shared/types/mongo\";\r\n\r\nconst isDeckValid = (playerDeck: PlayerDeck): boolean => {\r\n  const numberOfCards = playerDeck\r\n    .cards\r\n    .reduce((value, card) => value += card.amount, 0);\r\n\r\n  if (numberOfCards !== 30) { return false; }\r\n\r\n  return true;\r\n};\r\n\r\nexport {isDeckValid};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport {getSocketIds} from \"helpers/player\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst disconnect: SocketEvent = (socket): void => {\r\n  socket.on(\"disconnect\", async (reason) => {\r\n    const socketId = socket.id;\r\n    const player = await playersDb.findOneAndUpdate({socketId}, {\r\n      $set: {\r\n        socketId: \"\",\r\n        status: PlayerStatus.OFFLINE\r\n      }\r\n    }, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!player.value) { return; }\r\n\r\n    const {username, status, social} = player.value;\r\n    const socketIds = await getSocketIds(social.friends);\r\n\r\n    ioServer.to(socketIds).emit(\"updateStatus\", {username, status});\r\n  });\r\n};\r\n\r\nexport {disconnect};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst getPrivateKeyHash: SocketEvent = (socket): void => {\r\n  socket.on(\"getPrivateKeyHash\", async (params) => {\r\n    const {username} = params;\r\n    const player = await playersDb.findOne({username});\r\n\r\n    if (!player) {\r\n      socket.emit(\"notification\", \"Player not found.\");\r\n      return;\r\n    }\r\n\r\n    const {privateKeyHash} = player;\r\n    socket.emit(\"getPrivateKeyHash\", {privateKeyHash});\r\n  });\r\n};\r\n\r\nexport {getPrivateKeyHash};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {findPlayer} from \"apis/eos\";\r\nimport {chatsDb, gamesDb, lobbiesDb, playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\n// this needs refactoring...\r\nconst signin: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"signin\", async (params) => {\r\n    const {username, publicKey, signature} = params;\r\n    let lobby, game;\r\n\r\n    // const transaction = await blockchainService.transact(\"signin\", {publicKey, signature});\r\n\r\n    // if (!transaction) { return; }\r\n\r\n    const $player = await playersDb.findOneAndUpdate({username}, [{\r\n      $set: {\r\n        socketId,\r\n        status: {\r\n          $switch: {\r\n            branches: [{\r\n              case: {\r\n                $gt: [\"$lobbyId\", 0]\r\n              },\r\n              then: PlayerStatus.INLOBBY\r\n            }, {\r\n              case: {\r\n                $gt: [\"$gameId\", 0]\r\n              },\r\n              then: PlayerStatus.INGAME\r\n            }],\r\n            default: PlayerStatus.ONLINE\r\n          }\r\n        }\r\n      }\r\n    }], {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    const player$ = await findPlayer(username);\r\n\r\n    if (!$player.value || !player$) { return; }\r\n\r\n    const {wallet, nonce} = player$;\r\nconsole.log(wallet);\r\n    const {friends} = $player.value.social;\r\n    const friendsView: Array<any> = [];\r\n\r\n    for (const friendname of friends) {\r\n      const [friend, chat] = await Promise.all([\r\n        playersDb.findOne({\r\n          username: friendname\r\n        }),\r\n        chatsDb.findOne({\r\n          players: {\r\n            $all: [username, friendname]\r\n          }\r\n        })\r\n      ]);\r\n\r\n      if (!friend || !chat) { return; }\r\n\r\n      const {status, avatarId} = friend;\r\n      const {messages} = chat;\r\n\r\n      friendsView.push({username: friendname, status, avatarId, messages});\r\n    }\r\n\r\n    const {lobbyId, gameId} = $player.value;\r\n    let gameView;\r\n\r\n    if (lobbyId) {\r\n      lobby = await lobbiesDb.findOne({lobbyId});\r\n\r\n      if (!lobby) { return; }\r\n    } else if (gameId) {\r\n      game = await gamesDb.findOne({gameId});\r\n\r\n      if (!game) { return; }\r\n\r\n      if ($player.value.username === game.playerA.username) {\r\n        gameView = {\r\n          gameId: game.gameId,\r\n          currentPlayer: game.currentPlayer,\r\n          player: {\r\n            ...game.playerA,\r\n            // deck should be number so players can't cheat\r\n            // deck: game.playerA.deck.length\r\n            // but endTurn event needs refactor first\r\n          },\r\n          opponent: {\r\n            ...game.playerB,\r\n            deck: game.playerB.deck.length,\r\n            hand: game.playerB.hand.length\r\n          }\r\n        };\r\n      } else {\r\n        gameView = {\r\n          gameId: game.gameId,\r\n          currentPlayer: game.currentPlayer,\r\n          player: game.playerB,\r\n          opponent: {\r\n            ...game.playerA,\r\n            deck: game.playerA.deck.length,\r\n            hand: game.playerA.hand.length\r\n          }\r\n        };\r\n      }\r\n    }\r\n\r\n    socket.emit(\"signin\", {\r\n      player: {...$player.value, wallet, nonce},\r\n      friends: friendsView,\r\n      lobby,\r\n      game: gameView\r\n    });\r\n  });\r\n};\r\n\r\nexport {signin};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {transact} from \"apis/eos\";\r\nimport {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst signup: SocketEvent = (socket): void => {\r\n  socket.on(\"signup\", async (params) => {\r\n    const {username, publicKey, privateKeyHash} = params;\r\n    const player = await playersDb.findOne({username});\r\n\r\n    if (player) {\r\n      socket.emit(\"notification\", \"Username taken.\");\r\n      return;\r\n    }\r\n\r\n    const [transaction, insertPlayer] = await Promise.all([\r\n      transact(\"signup\", {\r\n        username,\r\n        public_key: publicKey\r\n      }),\r\n      playersDb.insertOne({\r\n        socketId: \"\",\r\n        username,\r\n        publicKey,\r\n        privateKeyHash,\r\n        status: PlayerStatus.OFFLINE,\r\n        xp: 0,\r\n        lv: 1,\r\n        deckId: 0,\r\n        avatarId: 0,\r\n        lobbyId: 0,\r\n        gameId: 0,\r\n        games: {\r\n          casual: {won: 0, lost: 0},\r\n          ranked: {won: 0, lost: 0, elo: 1000}\r\n        },\r\n        decks: [\r\n          {id: 0, klass: 1, name: \"Deck 1\", cards: []},\r\n          {id: 1, klass: 2, name: \"Deck 2\", cards: []},\r\n          {id: 2, klass: 3, name: \"Deck 3\", cards: []},\r\n          {id: 3, klass: 4, name: \"Deck 4\", cards: []}\r\n        ],\r\n        social: {\r\n          friends: [],\r\n          requests: [],\r\n          blocked: []\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!transaction || !insertPlayer.insertedId) {\r\n      socket.emit(\"notification\", \"Error creating account.\");\r\n      return;\r\n      // if signup fails on-chain, should we check whether it passed off-chain\r\n      // and remove the document from mongodb?\r\n    }\r\n\r\n    socket.emit(\"notification\", \"Account created successfully.\");\r\n  });\r\n};\r\n\r\nexport {signup};\r\n","import {disconnect} from \"./disconnect\";\r\nimport {getPrivateKeyHash} from \"./getPrivateKeyHash\";\r\nimport {signin} from \"./signin\";\r\nimport {signup} from \"./signup\";\r\n\r\nconst auth = [disconnect, getPrivateKeyHash, signin, signup];\r\n\r\nexport {auth};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {lobbiesDb, playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst destroyLobby: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"destroyLobby\", async () => {\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {username, lobbyId} = player;\r\n\r\n    if (!lobbyId) {\r\n      socket.emit(\"notification\", \"You are not in a lobby.\");\r\n      return;\r\n    }\r\n\r\n    const lobby = await lobbiesDb.findOne({lobbyId});\r\n\r\n    if (!lobby) { return; }\r\n\r\n    if (username !== lobby.host.username) {\r\n      socket.emit(\"notification\", \"You are not the lobby host.\");\r\n      return;\r\n    }\r\n\r\n    const [deleteLobby, updatePlayer] = await Promise.all([\r\n      lobbiesDb.deleteOne({lobbyId}),\r\n      playersDb.updateOne({socketId}, {\r\n        $set: {\r\n          lobbyId: 0,\r\n          status: PlayerStatus.ONLINE\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!deleteLobby.deletedCount || !updatePlayer.modifiedCount) { return; }\r\n\r\n    if (lobby.challengee.username) {\r\n      const challengee = await playersDb.findOneAndUpdate({\r\n        username: lobby.challengee.username\r\n      }, {\r\n        $set: {\r\n          lobbyId: 0,\r\n          status: PlayerStatus.ONLINE\r\n        }\r\n      }, {\r\n        returnDocument: \"after\"\r\n      });\r\n\r\n      if (!challengee.value) { return; }\r\n    }\r\n\r\n    socket.emit(\"destroyLobby\");\r\n    ioServer.to(lobby.challengee.socketId).emit(\"destroyLobby\");\r\n  });\r\n};\r\n\r\nexport {destroyLobby};\r\n","import {eosApi} from \"apis/eos\";\r\nimport {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst getLeaderboardsByLevel: SocketEvent = (socket): void => {\r\n  socket.on(\"getLeaderboardsByLevel\", async () => {\r\n    const byLevel = (await playersDb\r\n      .find()\r\n      .limit(100)\r\n      .sort({\r\n        lv: -1\r\n      })\r\n      .toArray()\r\n    ).map(({username, lv, avatarId}) => ({username, lv, avatarId}));\r\n\r\n    const byElo = (await playersDb\r\n      .find()\r\n      .limit(100)\r\n      .sort({\r\n        \"games.ranked.elo\": -1\r\n      })\r\n      .toArray()\r\n    ).map(({username, games: {\r\n      ranked: {elo}\r\n    }, avatarId}) => ({username, elo, avatarId}));\r\n\r\n    const byDMT = (await eosApi.rpc.get_table_rows({\r\n      code: \"somgame11111\",\r\n      scope: \"somgame11111\",\r\n      table: \"players\",\r\n      limit: 100\r\n    })).rows.sort((a, b) => {\r\n      const aDmt = a.wallet.find((token: string) => token.includes(\"DMT\"));\r\n      const bDmt = b.wallet.find((token: string) => token.includes(\"DMT\"));\r\n\r\n      return parseInt(bDmt) - parseInt(aDmt);\r\n    }).map((player) => {\r\n      const {username} = player;\r\n      const dmt = player.wallet.find((token: string) => token.includes(\"DMT\"));\r\n\r\n      return {username, dmt};\r\n    });\r\n\r\n    socket.emit(\"getLeaderboardsByLevel\", {byLevel, byElo, byDMT} as any);\r\n  });\r\n};\r\n\r\nexport {getLeaderboardsByLevel};\r\n","import {cards} from \"@som/shared/data\";\r\nimport {randomInt} from \"crypto\";\r\nimport type {Player} from \"@som/shared/types/mongo\";\r\nimport type {GameCards, GameMagic, GameMinion, GameTrap} from \"models/game\";\r\n\r\nconst buildDeck = (player: Player): GameCards => {\r\n  let deck: GameCards = [];\r\n  let gid = 1;\r\n\r\n  player.decks[player.deckId].cards.forEach((deckCard) => {\r\n    const card = cards.find((card) => card.id === deckCard.id);\r\n\r\n    if (!card) { return; }\r\n\r\n    const {id, klass, name, type, manaCost, effects, damage, health} = card;\r\n    let builtCard: GameMinion | GameMagic | GameTrap;\r\n\r\n    if (health && damage) {\r\n      builtCard = {\r\n        gid,\r\n        id,\r\n        klass,\r\n        name,\r\n        type,\r\n        manaCost,\r\n        effects,\r\n        damage,\r\n        health,\r\n        maxHealth: health,\r\n        canAttack: false,\r\n        hasTriggeredEffect: false\r\n      };\r\n    } else {\r\n      builtCard = {gid, id, klass, name, type, manaCost, effects};\r\n    }\r\n\r\n    deck.push(builtCard);\r\n    deckCard.amount > 1 && deck.push(builtCard);\r\n\r\n    gid += 1;\r\n  });\r\n\r\n  for (let i = deck.length - 1; i > 0; i -= 1) {\r\n    const j = randomInt(0, i + 1);\r\n    const temp = deck[i];\r\n    deck[i] = deck[j];\r\n    deck[j] = temp;\r\n  }\r\n\r\n  return deck;\r\n};\r\n\r\nexport {buildDeck};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {gamesDb, playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport {checkLevelUp} from \"helpers/player\";\r\nimport type {Game} from \"models/game\";\r\n\r\nconst endGame = async (game: Game, winner: \"A\" | \"B\"): Promise<void> => {\r\n  const {gameId} = game;\r\n  const $game = await gamesDb.findOne({gameId});\r\n\r\n  if (!$game) { return; }\r\n\r\n  const {playerA, playerB} = $game;\r\n\r\n  const [A, B] = await Promise.all([\r\n    playersDb.findOneAndUpdate({\r\n      username: playerA.username\r\n    }, {\r\n      $set: {\r\n        gameId: 0,\r\n        status: PlayerStatus.ONLINE\r\n      },\r\n      $inc: {\r\n        xp: winner === \"A\" ? 110 + game.currentTurn : 90 + game.currentTurn,\r\n        \"games.ranked.elo\": $game.type === \"ranked\" ? winner === \"A\" ? 20 : -20 : 0\r\n      }\r\n    }, {\r\n      returnDocument: \"after\"\r\n    }),\r\n    playersDb.findOneAndUpdate({\r\n      username: playerB.username\r\n    }, {\r\n      $set: {\r\n        gameId: 0,\r\n        status: PlayerStatus.ONLINE\r\n      },\r\n      $inc: {\r\n        xp: winner === \"B\" ? 110 + game.currentTurn : 90 + game.currentTurn,\r\n        \"games.ranked.elo\": $game.type === \"ranked\" ? winner === \"B\" ? 20 : -20 : 0\r\n      }\r\n    }, {\r\n      returnDocument: \"after\"\r\n    })\r\n  ]);\r\n\r\n  if (!A.value || !B.value) { return; }\r\n\r\n  await checkLevelUp(A.value);\r\n  await checkLevelUp(B.value);\r\n\r\n  const isDeletedGame = await gamesDb.deleteOne({gameId});\r\n\r\n  if (!isDeletedGame.deletedCount) { return; }\r\n\r\n  if (winner === \"A\") {\r\n    ioServer.to(A.value.socketId).emit(\"notification\", \"You won!\");\r\n    ioServer.to(B.value.socketId).emit(\"notification\", \"You lost...\");\r\n  } else if (winner === \"B\") {\r\n    ioServer.to(B.value.socketId).emit(\"notification\", \"You won!\");\r\n    ioServer.to(A.value.socketId).emit(\"notification\", \"You lost...\");\r\n  }\r\n\r\n  ioServer.to([A.value.socketId, B.value.socketId]).emit(\"endGame\");\r\n};\r\n\r\nexport {endGame};\r\n","import {endGame} from \"./endGame\";\r\nimport type {Game, GamePlayer} from \"models/game\";\r\n\r\nconst drawCard = async (game: Game, player: GamePlayer): Promise<void> => {\r\n  const {hand, deck} = player;\r\n  const card = deck.pop();\r\n\r\n  if (!card) { return await endGame(game, \"A\"); }\r\n\r\n  hand.push(card);\r\n};\r\n\r\nexport {drawCard};\r\n","import {buildDeck} from \"./buildDeck\";\r\nimport type {Player} from \"@som/shared/types/mongo\";\r\nimport type {Game, GameCards} from \"models/game\";\r\nimport {heroes} from \"@som/shared/data\";\r\n\r\nconst generateGame = (type: \"casual\" | \"ranked\" | \"custom\", gameId: number, playerA: Player, playerB: Player): Game => {\r\n  const playerAHand: GameCards = [];\r\n  const playerBHand: GameCards = [];\r\n  let playerADeck = buildDeck(playerA);\r\n  let playerBDeck = buildDeck(playerB);\r\n\r\n  playerAHand.push(...playerADeck.slice(-5));\r\n  playerBHand.push(...playerBDeck.slice(-5));\r\n\r\n  playerADeck = playerADeck.slice(0, -5);\r\n  playerBDeck = playerBDeck.slice(0, -5);\r\n\r\n  const playerASelectedDeck = playerA.decks.find(({id}) => id === playerA.deckId);\r\n  const playerBSelectedDeck = playerB.decks.find(({id}) => id === playerB.deckId);\r\n\r\n  if (!playerASelectedDeck || !playerBSelectedDeck) { return {} as Game; }\r\n\r\n  const playerAHero = heroes.find(({klass}) => klass === playerASelectedDeck.klass);\r\n  const playerBHero = heroes.find(({klass}) => klass === playerBSelectedDeck.klass);\r\n\r\n  if (!playerAHero || !playerBHero) { return {} as Game; }\r\n\r\n  return {\r\n    gameId,\r\n    type,\r\n    currentPlayer: playerA.username,\r\n    currentTurn: 0,\r\n    playerA: {\r\n      username: playerA.username,\r\n      hero: {...playerAHero, maxHealth: 100, maxMana: 20},\r\n      minion: {a: undefined, b: undefined, c: undefined, d: undefined},\r\n      trap: undefined,\r\n      hand: playerAHand,\r\n      deck: playerADeck,\r\n      graveyard: []\r\n    },\r\n    playerB: {\r\n      username: playerB.username,\r\n      hero: {...playerBHero, maxHealth: 100, maxMana: 20},\r\n      minion: {a: undefined, b: undefined, c: undefined, d: undefined},\r\n      trap: undefined,\r\n      hand: playerBHand,\r\n      deck: playerBDeck,\r\n      graveyard: []\r\n    },\r\n  };\r\n};\r\n\r\nexport {generateGame};\r\n","import type {GameFE} from \"@som/shared/types/client\";\r\nimport type {Game} from \"models/game\";\r\n\r\nconst generateGameFrontend = (game: Game, username: string): GameFE => {\r\n  const {gameId, currentPlayer, currentTurn, playerA, playerB} = game;\r\n\r\n  return {\r\n    gameId,\r\n    currentPlayer,\r\n    currentTurn,\r\n    player: playerA.username === username ? {\r\n      username: playerA.username,\r\n      hero: playerA.hero,\r\n      minion: playerA.minion,\r\n      trap: playerA.trap,\r\n      deck: playerA.deck,\r\n      hand: playerA.hand,\r\n      graveyard: playerA.graveyard\r\n    } : {\r\n      username: playerB.username,\r\n      hero: playerB.hero,\r\n      minion: playerB.minion,\r\n      trap: playerB.trap,\r\n      deck: playerB.deck,\r\n      hand: playerB.hand,\r\n      graveyard: playerB.graveyard\r\n    },\r\n    opponent: playerA.username === username ? {\r\n      username: playerB.username,\r\n      hero: playerB.hero,\r\n      minion: playerB.minion,\r\n      trap: playerB.trap,\r\n      deck: playerB.deck.length,\r\n      hand: playerB.hand.length,\r\n      graveyard: playerB.graveyard\r\n    } : {\r\n      username: playerA.username,\r\n      hero: playerA.hero,\r\n      minion: playerA.minion,\r\n      trap: playerA.trap,\r\n      deck: playerA.deck.length,\r\n      hand: playerA.hand.length,\r\n      graveyard: playerA.graveyard\r\n    }\r\n  };\r\n};\r\n\r\nexport {generateGameFrontend};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\n\r\nconst getGame = async (socketId: string) => {\r\n  const $player = await playersDb.findOne({socketId});\r\n\r\n  if (!$player) { return; }\r\n\r\n  const {username, gameId} = $player;\r\n  const $game = await gamesDb.findOne({gameId});\r\n\r\n  if (!$game) { return; }\r\n\r\n  const {playerA, playerB} = $game;\r\n  const player = playerA.username === username ? playerA : playerB;\r\n  const opponent = playerA.username === username ? playerB : playerA;\r\n\r\n  return {$game, player, opponent};\r\n};\r\n\r\nexport {getGame};\r\n","import type {Game} from \"models/game\";\r\n\r\nconst getPlayers = (game: Game, username: string) => {\r\n  const {playerA, playerB} = game;\r\n  const player = playerA.username === username ? playerA : playerB;\r\n  const opponent = playerA.username === username ? playerB : playerA;\r\n\r\n  return {player, opponent};\r\n};\r\n\r\nexport {getPlayers};\r\n","import {endGame} from \"./endGame\";\r\nimport type {Game} from \"models/game\";\r\n\r\nconst isGameOver = async (game: Game): Promise<boolean> => {\r\n  if (game.playerA.hero.health <= 0) {\r\n    await endGame(game, \"B\");\r\n    return true;\r\n  } else if (game.playerB.hero.health <= 0) {\r\n    await endGame(game, \"A\");\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport {isGameOver};\r\n","import {CardType} from \"@som/shared/enums\";\r\nimport type {GameMinion, GamePlayer} from \"models/game\";\r\n\r\nconst playMinion = (player: GamePlayer, gid: number, field: \"a\" | \"b\" | \"c\" | \"d\"): GameMinion | undefined => {\r\n  const {hand, minion, hero} = player;\r\n  const handCard = hand.find((card) => card.gid === gid) as GameMinion;\r\n\r\n  if (!handCard) { return; } // hand card not found by gid\r\n  if (handCard.type !== CardType.MINION) { return; } // hand card isn't minion\r\n  if (minion[field]) { return; } // field already inhibits a minion\r\n  if (handCard.manaCost > hero.mana) { return; } // hero doesn't have enough mana\r\n\r\n  hero.mana -= handCard.manaCost;\r\n  minion[field] = handCard;\r\n  hand.splice(hand.indexOf(handCard), 1);\r\n\r\n  return minion[field];\r\n};\r\n\r\nexport {playMinion};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport {generateGameFrontend} from \"./generateGameFe\";\r\nimport type {Game} from \"models/game\";\r\n\r\nconst saveGame = async (game: Game): Promise<void> => {\r\n  const {gameId, playerA, playerB} = game;\r\n  const [$updateGame, $playerA, $playerB] = await Promise.all([\r\n    gamesDb.replaceOne({gameId}, game),\r\n    playersDb.findOne({\r\n      username: playerA.username\r\n    }),\r\n    playersDb.findOne({\r\n      username: playerB.username\r\n    })\r\n  ]);\r\n\r\n  if (!$updateGame.modifiedCount || !$playerA || !$playerB) { return; }\r\n\r\n  ioServer.to($playerA.socketId).emit(\"reloadGameState\", {\r\n    game: generateGameFrontend(game, playerA.username)\r\n  });\r\n\r\n  ioServer.to($playerB.socketId).emit(\"reloadGameState\", {\r\n    game: generateGameFrontend(game, playerB.username)\r\n  });\r\n};\r\n\r\nexport {saveGame};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {randomInt} from \"crypto\";\r\nimport {ioServer} from \"apis/server\";\r\nimport {gamesDb, playersDb} from \"apis/mongo\";\r\nimport {generateGame} from \"./generateGame\";\r\nimport {generateGameFrontend} from \"./generateGameFe\";\r\n\r\nconst startGame = async (type: \"casual\" | \"ranked\" | \"custom\", playerA: string, playerB: string): Promise<void> => {\r\n  const gameId = randomInt(0, 1000000);\r\n\r\n  const [upd1, upd2] = await Promise.all([\r\n    playersDb.findOneAndUpdate({\r\n      username: playerA\r\n    }, {\r\n      $set: {\r\n        status: PlayerStatus.INGAME,\r\n        gameId\r\n      }\r\n    }),\r\n    playersDb.findOneAndUpdate({\r\n      username: playerB\r\n    }, {\r\n      $set: {\r\n        status: PlayerStatus.INGAME,\r\n        gameId\r\n      }\r\n    })\r\n  ]);\r\n\r\n  if (!upd1.value || !upd2.value) { return; }\r\n\r\n  const game = generateGame(type, gameId, upd1.value, upd2.value);\r\n  const isInserted = await gamesDb.insertOne(game);\r\n\r\n  if (!isInserted.insertedId) { return; }\r\n\r\n  ioServer.to(upd1.value.socketId).emit(\"startGame\", {\r\n    game: generateGameFrontend(game, upd1.value.username)\r\n  });\r\n\r\n  ioServer.to(upd2.value.socketId).emit(\"startGame\", {\r\n    game: generateGameFrontend(game, upd2.value.username)\r\n  });\r\n};\r\n\r\nexport {startGame};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport type {GameMinion} from \"models/game\";\r\n\r\nconst charge = (minion: GameMinion): void => {\r\n  if (!minion.hasTriggeredEffect && minion.effects.includes(Effect.CHARGE)) {\r\n    minion.canAttack = true;\r\n    minion.hasTriggeredEffect = true;\r\n  }\r\n};\r\n\r\nexport {charge};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport type {GamePlayer} from \"models/game\";\r\n\r\nconst mirrorsEdge = (player: GamePlayer, opponent: GamePlayer, damage: number): boolean => {\r\n  if (opponent.trap && opponent.trap.effects.includes(Effect.MIRRORS_EDGE)) {\r\n    player.hero.health -= damage;\r\n\r\n    opponent.graveyard.push(opponent.trap);\r\n    opponent.trap = undefined;\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport {mirrorsEdge};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport type {GameMinion} from \"models/game\";\r\n\r\nconst multiStrike = (minion: GameMinion): void => {\r\n  if (minion.effects.includes(Effect.MULTI_STRIKE) && !minion.hasTriggeredEffect) {\r\n    minion.canAttack = true;\r\n    minion.hasTriggeredEffect = true;\r\n  }\r\n};\r\n\r\nexport {multiStrike};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport type {GameMinion} from \"models/game\";\r\n\r\nconst necro = (minion: GameMinion): void => {\r\n  if (minion.effects.includes(Effect.NECRO) && !minion.hasTriggeredEffect) {\r\n    minion.health -= 2;\r\n    minion.damage -= 2;\r\n    minion.hasTriggeredEffect = true;\r\n  }\r\n};\r\n\r\nexport {necro};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport {randomInt} from \"crypto\";\r\nimport type {GameMinion, GamePlayer} from \"models/game\";\r\n\r\nconst quickShot = (minion: GameMinion, opponent: GamePlayer): void => {\r\n  if (minion.effects.includes(Effect.QUICK_SHOT) && !minion.hasTriggeredEffect) {\r\n    const possibleMinions: Array<GameMinion> = [];\r\n    const minionKeys = Object.keys(opponent.minion) as Array<keyof typeof opponent.minion>;\r\n\r\n    minionKeys.forEach((key) => {\r\n      const minion = opponent.minion[key];\r\n\r\n      if (!minion) { return; }\r\n\r\n      possibleMinions.push(minion);\r\n    });\r\n\r\n    if (possibleMinions.length < 1) { return; }\r\n\r\n    let randomMinion = 0;\r\n\r\n    if (possibleMinions.length > 1) {\r\n      randomMinion = randomInt(possibleMinions.length);\r\n    }\r\n\r\n    possibleMinions[randomMinion].health -= 2;\r\n    minion.hasTriggeredEffect = true;\r\n  }\r\n};\r\n\r\nexport {quickShot};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport type {GameMinion, GamePlayer} from \"models/game\";\r\n\r\nconst smite = (player: GamePlayer, opponent: GamePlayer, minion: GameMinion, field: \"a\" | \"b\" | \"c\" | \"d\"): boolean => {\r\n  if (opponent.trap && opponent.trap.effects.includes(Effect.SMITE)) {\r\n    minion.health = minion.maxHealth;\r\n\r\n    player.graveyard.push(minion);\r\n    player.minion[field] = undefined;\r\n\r\n    opponent.graveyard.push(opponent.trap);\r\n    opponent.trap = undefined;\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport {smite};\r\n","import {CardType, Effect} from \"@som/shared/enums\";\r\nimport type {GameMinion, GamePlayer} from \"models/game\";\r\n\r\nconst spellweave = (minion: GameMinion, player: GamePlayer): void => {\r\n  if (minion.effects.includes(Effect.SPELLWEAVE) && !minion.hasTriggeredEffect) {\r\n    const bonus = player.graveyard.reduce((sum, card): number => {\r\n      if (card.type === CardType.MAGIC || card.type === CardType.TRAP) {\r\n        return sum += 1;\r\n      }\r\n\r\n      return sum\r\n    }, 0);\r\n\r\n    minion.damage += bonus;\r\n    minion.hasTriggeredEffect = true;\r\n  }\r\n};\r\n\r\nexport {spellweave};\r\n","import {charge} from \"./charge\";\r\nimport {mirrorsEdge} from \"./mirrorsEdge\";\r\nimport {multiStrike} from \"./multiStrike\";\r\nimport {necro} from \"./necro\";\r\nimport {quickShot} from \"./quickShot\";\r\nimport {smite} from \"./smite\";\r\nimport {spellweave} from \"./spellweave\";\r\n\r\nconst triggerEffect = {\r\n  charge,\r\n  mirrorsEdge,\r\n  multiStrike,\r\n  necro,\r\n  quickShot,\r\n  smite,\r\n  spellweave\r\n};\r\n\r\nexport default triggerEffect;\r\n","import {buildDeck} from \"./buildDeck\";\r\nimport {drawCard} from \"./drawCard\";\r\nimport {endGame} from \"./endGame\";\r\nimport {generateGame} from \"./generateGame\";\r\nimport {generateGameFrontend} from \"./generateGameFe\";\r\nimport {getGame} from \"./getGame\";\r\nimport {getPlayers} from \"./getPlayers\";\r\nimport {isGameOver} from \"./isGameOver\";\r\nimport {playMinion} from \"./playMinion\";\r\nimport {saveGame} from \"./saveGame\";\r\nimport {startGame} from \"./startGame\";\r\nimport triggerEffect from \"./triggerEffect\";\r\n\r\nconst gameEngine = {\r\n  buildDeck,\r\n  drawCard,\r\n  endGame,\r\n  generateGame,\r\n  generateGameFrontend,\r\n  getGame,\r\n  getPlayers,\r\n  isGameOver,\r\n  playMinion,\r\n  saveGame,\r\n  startGame,\r\n  triggerEffect\r\n};\r\n\r\nexport default gameEngine;\r\n","import { PlayerStatus } from \"@som/shared/enums\";\r\nimport {casualQueuePlayersDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst joinCasualQueue: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"joinCasualQueue\", async () => {\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {username, lv} = player;\r\n    const casualQueuePlayers = await casualQueuePlayersDb.find().toArray();\r\n\r\n    for (const opponent of casualQueuePlayers) {\r\n      if (opponent.lv < lv - 100 || opponent.lv < lv + 100) {\r\n        const deleteCasualQueuePlayer = await casualQueuePlayersDb.deleteOne({\r\n          username: opponent.username\r\n        });\r\n\r\n        if (!deleteCasualQueuePlayer.deletedCount) { return; }\r\n\r\n        await gameEngine.startGame(\"casual\", opponent.username, username);\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    const insertCasualQueuePlayer = await casualQueuePlayersDb.insertOne({username, lv});\r\n    const updatedPlayer = await playersDb.findOneAndUpdate({socketId}, {\r\n      $set: {\r\n        status: PlayerStatus.IN_CASUAL_QUEUE\r\n      }\r\n    }, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!insertCasualQueuePlayer.insertedId || !updatedPlayer.value) { return; }\r\n\r\n    socket.emit(\"joinCasualQueue\");\r\n  });\r\n};\r\n\r\nexport {joinCasualQueue};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport { ioServer } from \"apis/server\";\r\nimport {lobbiesDb, playersDb} from \"apis/mongo\";\r\nimport {isDeckValid} from \"helpers/player\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst joinLobby: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"joinLobby\", async (params) => {\r\n    const {lobbyId} = params;\r\n    const [player, lobby] = await Promise.all([\r\n      playersDb.findOne({socketId}),\r\n      lobbiesDb.findOne({lobbyId})\r\n    ]);\r\n\r\n    if (!player) {\r\n      socket.emit(\"notification\", \"Player not found.\");\r\n      return;\r\n    }\r\n    if (!lobby) {\r\n      socket.emit(\"notification\", \"Lobby not found.\");\r\n      return;\r\n    }\r\n    if (player.lobbyId) {\r\n      socket.emit(\"notification\", \"You are already in a lobby.\");\r\n      return;\r\n    }\r\n    if (player.gameId) {\r\n      socket.emit(\"notification\", \"You can't join a lobby while in game.\");\r\n      return;\r\n    }\r\n    if (lobby.challengee.username) {\r\n      socket.emit(\"notification\", \"Lobby is full.\");\r\n      return;\r\n    }\r\n    if (!isDeckValid(player.decks[player.deckId])) {\r\n      socket.emit(\"notification\", \"Invalid deck.\");\r\n      return;\r\n    }\r\n\r\n    const {username, avatarId} = player;\r\n    const [modifiedLobby, updatedPlayer] = await Promise.all([\r\n      lobbiesDb.findOneAndUpdate({lobbyId}, {\r\n        $set: {\r\n          challengee: {username, socketId, avatarId}\r\n        }\r\n      }, {\r\n        returnDocument: \"after\"\r\n      }),\r\n      playersDb.updateOne({socketId}, {\r\n        $set: {\r\n          lobbyId,\r\n          status: PlayerStatus.INLOBBY\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!modifiedLobby.value || !updatedPlayer.modifiedCount) {\r\n      socket.emit(\"notification\", \"Error joining lobby.\");\r\n      return;\r\n    }\r\n\r\n    const {challengee} = modifiedLobby.value;\r\n\r\n    socket.emit(\"joinLobbySender\", {lobby});\r\n    ioServer\r\n      .to(modifiedLobby.value.host.socketId)\r\n      .emit(\"joinLobbyReceiver\", {challengee});\r\n  });\r\n};\r\n\r\nexport {joinLobby};\r\n","import { PlayerStatus } from \"@som/shared/enums\";\r\nimport {rankedQueuePlayersDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst joinRankedQueue: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"joinRankedQueue\", async () => {\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {username, games} = player;\r\n    const {elo} = games.ranked;\r\n    const rankedQueuePlayers = await rankedQueuePlayersDb.find().toArray();\r\n\r\n    for (const opponent of rankedQueuePlayers) {\r\n      if (opponent.elo < elo - 1000 || opponent.elo < elo + 1000) {\r\n        const deleteRankedQueuePlayer = await rankedQueuePlayersDb.deleteOne({\r\n          username: opponent.username\r\n        });\r\n\r\n        if (!deleteRankedQueuePlayer.deletedCount) { return; }\r\n\r\n        await gameEngine.startGame(\"ranked\", opponent.username, username);\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    const insertRankedQueuePlayer = await rankedQueuePlayersDb\r\n      .insertOne({username, elo});\r\n\r\n    const updatedPlayer = await playersDb.findOneAndUpdate({socketId}, {\r\n      $set: {\r\n        status: PlayerStatus.IN_RANKED_QUEUE\r\n      }\r\n    }, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!insertRankedQueuePlayer.insertedId || !updatedPlayer.value) { return; }\r\n\r\n    socket.emit(\"joinRankedQueue\");\r\n  });\r\n};\r\n\r\nexport {joinRankedQueue};\r\n","import { PlayerStatus } from \"@som/shared/enums\";\r\nimport {casualQueuePlayersDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst leaveCasualQueue: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"leaveCasualQueue\", async () => {\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {username} = player;\r\n    const [deleteCasualQueuePlayer, updatePlayer] = await Promise.all([\r\n      casualQueuePlayersDb.deleteOne({username}),\r\n      playersDb.updateOne({username}, {\r\n        $set: {\r\n          status: PlayerStatus.ONLINE\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!deleteCasualQueuePlayer.deletedCount || !updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"leaveCasualQueue\");\r\n  });\r\n};\r\n\r\nexport {leaveCasualQueue};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport { ioServer } from \"apis/server\";\r\nimport {lobbiesDb, playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst leaveLobby: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"leaveLobby\", async () => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) {\r\n      socket.emit(\"notification\", \"Player not found.\");\r\n      return;\r\n    }\r\n    if (!$player.lobbyId) {\r\n      socket.emit(\"notification\", \"You are not in a lobby.\");\r\n      return;\r\n    }\r\n\r\n    const {lobbyId} = $player;\r\n    const $lobby = await lobbiesDb.findOne({lobbyId});\r\n\r\n    if (!$lobby) {\r\n      socket.emit(\"notification\", \"Lobby not found.\");\r\n      return;\r\n    }\r\n\r\n    const [$updateLobby, $updatePlayer] = await Promise.all([\r\n      lobbiesDb.updateOne({lobbyId}, {\r\n        $set: {\r\n          challengee: {\r\n            username: \"\",\r\n            socketId: \"\",\r\n            avatarId: 0\r\n          }\r\n        }\r\n      }),\r\n      playersDb.updateOne({socketId}, {\r\n        $set: {\r\n          lobbyId: 0,\r\n          status: PlayerStatus.ONLINE\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!$updateLobby.modifiedCount || !$updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"leaveLobbySender\");\r\n    ioServer.to($lobby.host.socketId).emit(\"leaveLobbyReceiver\");\r\n  });\r\n};\r\n\r\nexport {leaveLobby};\r\n","import {PlayerStatus} from \"@som/shared/enums\";\r\nimport {rankedQueuePlayersDb, playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst leaveRankedQueue: SocketEvent = (socket): void => {\r\n  socket.on(\"leaveRankedQueue\", async () => {\r\n    const socketId = socket.id;\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {username} = player;\r\n    const [deleteRankedQueuePlayer, updatePlayer] = await Promise.all([\r\n      rankedQueuePlayersDb.deleteOne({username}),\r\n      playersDb.updateOne({username}, {\r\n        $set: {\r\n          status: PlayerStatus.ONLINE\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (\r\n      !deleteRankedQueuePlayer.deletedCount ||\r\n      !updatePlayer.modifiedCount\r\n    ) { return; }\r\n\r\n    socket.emit(\"leaveRankedQueue\");\r\n  });\r\n};\r\n\r\nexport {leaveRankedQueue};\r\n","import {randomInt} from \"crypto\";\r\nimport {PlayerStatus} from \"@som/shared/enums\";\r\nimport {lobbiesDb, playersDb} from \"apis/mongo\";\r\nimport {isDeckValid} from \"helpers/player\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst makeLobby: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"makeLobby\", async () => {\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) {\r\n      socket.emit(\"notification\", \"Player not found.\");\r\n      return;\r\n    }\r\n    if (player.lobbyId) {\r\n      socket.emit(\"notification\", \"You are already in a lobby.\");\r\n      return;\r\n    }\r\n    if (player.gameId) {\r\n      socket.emit(\"notification\", \"You can't make a lobby while in game.\");\r\n      return;\r\n    }\r\n    if (!isDeckValid(player.decks[player.deckId])) {\r\n      socket.emit(\"notification\", \"Invalid deck.\");\r\n      return;\r\n    }\r\n\r\n    const {username, avatarId} = player;\r\n    const lobbyId = randomInt(1, 1000000);\r\n    const [insertLobby, updatePlayer] = await Promise.all([\r\n      lobbiesDb.insertOne({\r\n        lobbyId,\r\n        host: {username, socketId, avatarId},\r\n        challengee: {\r\n          username: \"\",\r\n          socketId: \"\",\r\n          avatarId: 0\r\n        }\r\n      }),\r\n      playersDb.updateOne({socketId}, {\r\n        $set: {\r\n          lobbyId,\r\n          status: PlayerStatus.INLOBBY\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (!insertLobby.insertedId || !updatePlayer.modifiedCount) { return; }\r\n\r\n    const lobby = await lobbiesDb.findOne({lobbyId});\r\n\r\n    if (!lobby) { return; }\r\n\r\n    socket.emit(\"makeLobby\", {lobby});\r\n  });\r\n};\r\n\r\nexport {makeLobby};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst saveDeck: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"saveDeck\", async (params) => {\r\n    const {cards} = params;\r\n    const player = await playersDb.findOne({socketId});\r\n\r\n    if (!player) { return; }\r\n\r\n    const {deckId} = player;\r\n    const $updatePlayer = await playersDb.updateOne({\r\n      socketId,\r\n      \"decks.id\": deckId\r\n    }, {\r\n      $set: {\r\n        \"decks.$.cards\": cards\r\n      }\r\n    });\r\n\r\n    if (!$updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"saveDeck\", {cards});\r\n  });\r\n};\r\n\r\nexport {saveDeck};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst selectDeck: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"selectDeck\", async (params) => {\r\n    const {deckId} = params;\r\n    const $updatePlayer = await playersDb.updateOne({socketId}, {\r\n      $set: {deckId}\r\n    });\r\n\r\n    if (!$updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"selectDeck\", {deckId});\r\n  });\r\n};\r\n\r\nexport {selectDeck};\r\n","import {transact} from \"apis/eos\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst sendToken: SocketEvent = (socket): void => {\r\n  socket.on(\"sendToken\", async (params) => {\r\n  console.log(params);\r\n    const transaction = await transact(\"transfer\", params);\r\n\r\n    if (!transaction) {\r\n      socket.emit(\"notification\", \"Error sending token.\");\r\n      return;\r\n    }\r\n  });\r\n};\r\n\r\nexport {sendToken};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst setDeckKlass: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"setDeckKlass\", async (params) => {\r\n    const {deckId, klass} = params;\r\n    const $updatePlayer = await playersDb.updateOne({\r\n      socketId,\r\n      \"decks.id\": deckId\r\n    }, {\r\n      $set: {\r\n        \"decks.$.klass\": klass\r\n      }\r\n    });\r\n\r\n    if (!$updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"setDeckKlass\", {deckId, klass});\r\n  });\r\n};\r\n\r\nexport {setDeckKlass};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst setDeckName: SocketEvent = (socket): void => {\r\n  const socketId = socket;\r\n\r\n  socket.on(\"setDeckName\", async (params) => {\r\n    const {id, name} = params;\r\n    const $updatePlayer = await playersDb.updateOne({\r\n      socketId,\r\n      \"decks.id\": id\r\n    }, {\r\n      $set: {\r\n        \"decks.$.name\": name\r\n      }\r\n    });\r\n\r\n    if (!$updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"setDeckName\", {id, name});\r\n  });\r\n};\r\n\r\nexport {setDeckName};\r\n","import {lobbiesDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst startCustomGame: SocketEvent = (socket): void => {\r\n  socket.on(\"startGame\", async (params) => {\r\n    const {lobbyId} = params;\r\n    const lobby = await lobbiesDb.findOne({lobbyId});\r\n    const deleteLobby = await lobbiesDb.deleteOne({lobbyId});\r\n\r\n    if (!lobby || !deleteLobby.deletedCount) { return; }\r\n\r\n    const {host, challengee} = lobby;\r\n\r\n    await gameEngine.startGame(\"custom\", host.username, challengee.username);\r\n  });\r\n};\r\n\r\nexport {startCustomGame};\r\n","import {destroyLobby} from \"./destroyLobby\";\r\nimport {getLeaderboardsByLevel} from \"./getLeaderboardsByLevel\";\r\nimport {joinCasualQueue} from \"./joinCasualQueue\";\r\nimport {joinLobby} from \"./joinLobby\";\r\nimport {joinRankedQueue} from \"./joinRankedQueue\";\r\nimport {leaveCasualQueue} from \"./leaveCasualQueue\";\r\nimport {leaveLobby} from \"./leaveLobby\";\r\nimport {leaveRankedQueue} from \"./leaveRankedQueue\";\r\nimport {makeLobby} from \"./makeLobby\";\r\nimport {saveDeck} from \"./saveDeck\";\r\nimport {selectDeck} from \"./selectDeck\";\r\nimport {sendToken} from \"./sendToken\";\r\nimport {setDeckKlass} from \"./setDeckKlass\";\r\nimport {setDeckName} from \"./setDeckName\";\r\nimport {startCustomGame} from \"./startCustomGame\";\r\n\r\nconst client = [\r\n  destroyLobby,\r\n  getLeaderboardsByLevel,\r\n  joinCasualQueue,\r\n  joinLobby,\r\n  joinRankedQueue,\r\n  leaveCasualQueue,\r\n  leaveLobby,\r\n  leaveRankedQueue,\r\n  makeLobby,\r\n  saveDeck,\r\n  selectDeck,\r\n  sendToken,\r\n  setDeckKlass,\r\n  setDeckName,\r\n  startCustomGame\r\n];\r\n\r\nexport {client};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst attackHero: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n  const {triggerEffect} = gameEngine;\r\n\r\n  socket.on(\"attackHero\", async (params) => {\r\n    const $player = await playersDb.findOne({socketId});\r\n    const {attacker} = params;\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const game = await gamesDb.findOne({gameId});\r\n\r\n    if (!game) { return; }\r\n    if (game.currentPlayer !== username) { return; }\r\n\r\n    const {player, opponent} = gameEngine.getPlayers(game, username);\r\n    const playerMinion = player.minion[attacker];\r\n    const opponentHero = opponent.hero;\r\n\r\n    if (!playerMinion) { return; }\r\n    if (!playerMinion.canAttack) { return; }\r\n\r\n    playerMinion.canAttack = false;\r\n    triggerEffect.multiStrike(playerMinion);\r\n\r\n    const isTriggered = triggerEffect.mirrorsEdge(player, opponent, playerMinion.damage);\r\n\r\n    if (isTriggered) {\r\n      if (await gameEngine.isGameOver(game)) { return; }\r\n    }\r\n\r\n    opponentHero.health -= playerMinion.damage;\r\n\r\n    if (await gameEngine.isGameOver(game)) { return; }\r\n\r\n    await gameEngine.saveGame(game);\r\n  });\r\n};\r\n\r\nexport {attackHero};\r\n","import {Effect} from \"@som/shared/enums\";\r\nimport {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst attackMinion: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n  const {triggerEffect} = gameEngine;\r\n\r\n  socket.on(\"attackMinion\", async (params) => {\r\n    const {attacked, attacker} = params;\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {player, opponent} = gameEngine.getPlayers($game, username);\r\n    const playerMinion = player.minion[attacker];\r\n    const opponentMinion = opponent.minion[attacked];\r\n\r\n    if (!playerMinion || !opponentMinion) { return; }\r\n    if (!playerMinion.canAttack) { return; }\r\n\r\n    playerMinion.canAttack = false;\r\n    triggerEffect.multiStrike(playerMinion);\r\n\r\n    if (opponent.trap && opponent.trap.effects.includes(Effect.MIRRORS_EDGE)) {\r\n      player.hero.health -= playerMinion.damage;\r\n\r\n      if (await gameEngine.isGameOver($game)) { return; }\r\n\r\n      opponent.graveyard.push(opponent.trap);\r\n      opponent.trap = undefined;\r\n\r\n      return await gameEngine.saveGame($game);\r\n    }\r\n\r\n    playerMinion.health -= opponentMinion.damage;\r\n    opponentMinion.health -= playerMinion.damage;\r\n\r\n    if (playerMinion.health <= 0) {\r\n      playerMinion.health = playerMinion.maxHealth;\r\n\r\n      player.graveyard.push(playerMinion);\r\n      player.minion[attacker] = undefined;\r\n    }\r\n\r\n    if (opponentMinion.health <= 0) {\r\n      opponentMinion.health = opponentMinion.maxHealth;\r\n\r\n      opponent.graveyard.push(opponentMinion);\r\n      opponent.minion[attacked] = undefined;\r\n    }\r\n\r\n    await gameEngine.saveGame($game);\r\n  });\r\n};\r\n\r\nexport {attackMinion};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst endTurn: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"endTurn\", async () => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {opponent} = gameEngine.getPlayers($game, username);\r\n    const {hero, minion} = opponent;\r\n\r\n    await gameEngine.drawCard($game, opponent);\r\n\r\n    hero.mana = 20;\r\n\r\n    const minionKeys = Object.keys(minion) as Array<keyof typeof minion>;\r\n\r\n    minionKeys.forEach((key) => {\r\n      const Minion = minion[key];\r\n      if (!Minion) { return; }\r\n      Minion.canAttack = true;\r\n      Minion.hasTriggeredEffect = false;\r\n    });\r\n\r\n    $game.currentPlayer = opponent.username;\r\n    $game.currentTurn += 1;\r\n\r\n    await gameEngine.saveGame($game);\r\n  });\r\n};\r\n\r\nexport {endTurn};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst hoverCard: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"hoverCard\", async (params) => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {opponent} = gameEngine.getPlayers($game, username);\r\n    const $opponent = await playersDb.findOne({\r\n      username: opponent.username\r\n    });\r\n\r\n    if (!$opponent || !$opponent.socketId) { return; }\r\n\r\n    ioServer.to($opponent.socketId).emit(\"hoverCard\", params);\r\n  });\r\n};\r\n\r\nexport {hoverCard};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport {ioServer} from \"apis/server\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst hoverHandCard: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"hoverHandCard\", async (params) => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {opponent} = gameEngine.getPlayers($game, username);\r\n    const $opponent = await playersDb.findOne({\r\n      username: opponent.username\r\n    });\r\n\r\n    if (!$opponent || !$opponent.socketId) { return; }\r\n\r\n    ioServer.to($opponent.socketId).emit(\"hoverHandCard\", params);\r\n  });\r\n};\r\n\r\nexport {hoverHandCard};\r\n","import {CardType, Effect} from \"@som/shared/enums\";\r\nimport {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\nimport type {GameTrap} from \"models/game\";\r\n\r\nconst playMagic: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n  const {triggerEffect} = gameEngine;\r\n\r\n  socket.on(\"playMagic\", async (params) => {\r\n    const {gid} = params;\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {player} = gameEngine.getPlayers($game, username);\r\n    const {hand, hero} = player;\r\n    const handCard = hand.find((card) => card.gid === gid);\r\n\r\n    if (!handCard) { return; }\r\n    if (handCard.type !== CardType.MAGIC) { return; }\r\n    if (handCard.manaCost > hero.mana) { return; }\r\n\r\n    if (handCard.effects.includes(Effect.RELOAD)) {\r\n      hero.mana -= handCard.manaCost;\r\n      await gameEngine.drawCard($game, player);\r\n      hand.splice(hand.indexOf(handCard), 1);\r\n      player.graveyard.push(handCard);\r\n    }\r\n\r\n    await gameEngine.saveGame($game);\r\n  });\r\n};\r\n\r\nexport {playMagic};\r\n","import gameEngine from \"helpers/game\";\nimport type {SocketEvent} from \"models\";\n\nconst playMinion: SocketEvent = (socket): void => {\n  const socketId = socket.id;\n  const {triggerEffect} = gameEngine;\n\n  socket.on(\"playMinion\", async (params) => {\n    const {field, gid} = params;\n    const data = await gameEngine.getGame(socketId);\n\n    if (!data) { return; }\n\n    const {$game, player, opponent} = data;\n\n    if ($game.currentPlayer !== player.username) { return; }\n\n    const summonedMinion = gameEngine.playMinion(player, gid, field);\n\n    if (!summonedMinion) { return; }\n\n    const isSmiteTriggered = triggerEffect.smite(player, opponent, summonedMinion, field);\n\n    if (!isSmiteTriggered) {\n      triggerEffect.charge(summonedMinion);\n      triggerEffect.quickShot(summonedMinion, opponent);\n      triggerEffect.necro(summonedMinion);\n      triggerEffect.spellweave(summonedMinion, player);\n    }\n\n    await gameEngine.saveGame($game);\n  });\n};\n\nexport {playMinion};\n","import {CardType} from \"@som/shared/enums\";\r\nimport {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport type {SocketEvent} from \"models\";\r\nimport type {GameTrap} from \"models/game\";\r\n\r\nconst playTrap: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n  const {triggerEffect} = gameEngine;\r\n\r\n  socket.on(\"playTrap\", async (params) => {\r\n    const {gid} = params;\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {player} = gameEngine.getPlayers($game, username);\r\n\r\n    if (player.trap) { return; }\r\n\r\n    const {hand, hero} = player;\r\n    const handCard = hand.find((card) => card.gid === gid);\r\n\r\n    if (!handCard) { return; }\r\n    if (handCard.type !== CardType.TRAP) { return; }\r\n    if (handCard.manaCost > hero.mana) { return; }\r\n\r\n    hero.mana -= handCard.manaCost;\r\n    player.trap = handCard as GameTrap;\r\n    hand.splice(hand.indexOf(handCard), 1);\r\n\r\n    await gameEngine.saveGame($game);\r\n  });\r\n};\r\n\r\nexport {playTrap};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst unhoverCard: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"unhoverCard\", async () => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {opponent} = gameEngine.getPlayers($game, username);\r\n    const $opponent = await playersDb.findOne({\r\n      username: opponent.username\r\n    });\r\n\r\n    if (!$opponent || !$opponent.socketId) { return; }\r\n\r\n    ioServer.to($opponent.socketId).emit(\"unhoverCard\");\r\n  });\r\n};\r\n\r\nexport {unhoverCard};\r\n","import {gamesDb, playersDb} from \"apis/mongo\";\r\nimport gameEngine from \"helpers/game\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst unhoverHandCard: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"unhoverHandCard\", async () => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, gameId} = $player;\r\n    const $game = await gamesDb.findOne({gameId});\r\n\r\n    if (!$game) { return; }\r\n    if ($game.currentPlayer !== username) { return; }\r\n\r\n    const {opponent} = gameEngine.getPlayers($game, username);\r\n    const $opponent = await playersDb.findOne({\r\n      username: opponent.username\r\n    });\r\n\r\n    if (!$opponent || !$opponent.socketId) { return; }\r\n\r\n    ioServer.to($opponent.socketId).emit(\"unhoverHandCard\");\r\n  });\r\n};\r\n\r\nexport {unhoverHandCard};\r\n","import {attackHero} from \"./attackHero\";\r\nimport {attackMinion} from \"./attackMinion\";\r\nimport {endTurn} from \"./endTurn\";\r\nimport {hoverCard} from \"./hoverCard\";\r\nimport {hoverHandCard} from \"./hoverHandCard\";\r\nimport {playMagic} from \"./playMagic\";\r\nimport {playMinion} from \"./playMinion\";\r\nimport {playTrap} from \"./playTrap\";\r\nimport {unhoverCard} from \"./unhoverCard\";\r\nimport {unhoverHandCard} from \"./unhoverHandCard\";\r\n\r\nconst game = [\r\n  attackHero,\r\n  attackMinion,\r\n  endTurn,\r\n  hoverCard,\r\n  hoverHandCard,\r\n  playMagic,\r\n  playMinion,\r\n  playTrap,\r\n  unhoverCard,\r\n  unhoverHandCard\r\n];\r\n\r\nexport {game};\r\n","import type {UpdateFilter} from \"mongodb\";\r\nimport type {SocketEvent} from \"models\";\r\nimport { chatsDb, playersDb } from \"apis/mongo\";\r\nimport { Player } from \"@som/shared/types/mongo\";\r\nimport { ioServer } from \"apis/server\";\r\n\r\nconst acceptFriend: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"acceptFriend\", async (params) => {\r\n    const {username} = params;\r\n    const $sender = await playersDb.findOneAndUpdate({socketId}, {\r\n      $pull: {\r\n        \"social.requests\": username\r\n      },\r\n      $push: {\r\n        \"social.friends\": username\r\n      }\r\n    } as UpdateFilter<Player> | Partial<Player>, { // bug: https://github.com/Automattic/mongoose/issues/10075\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!$sender.value) { return; }\r\n\r\n    const receiver = await playersDb.findOneAndUpdate({username}, {\r\n      $push: {\r\n        \"social.friends\": $sender.value.username\r\n      }\r\n    } as UpdateFilter<Player> | Partial<Player>, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!receiver.value) { return; }\r\n\r\n    const insertChat = await chatsDb.insertOne({\r\n      players: [$sender.value.username, receiver.value.username],\r\n      messages: []\r\n    });\r\n\r\n    if (!insertChat.insertedId) { return; }\r\n\r\n    socket.emit(\"acceptFriendSender\", {\r\n      username: receiver.value.username,\r\n      avatarId: receiver.value.avatarId,\r\n      status: receiver.value.status\r\n    });\r\n\r\n    ioServer.to(receiver.value.socketId).emit(\"acceptFriendReceiver\", {\r\n      username: $sender.value.username,\r\n      avatarId: $sender.value.avatarId,\r\n      status: $sender.value.status\r\n    });\r\n  });\r\n};\r\n\r\nexport {acceptFriend};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst addFriend: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"addFriend\", async (params) => {\r\n    const {username} = params;\r\n    const [sender, receiver] = await Promise.all([\r\n      playersDb.findOne({socketId}),\r\n      playersDb.findOne({username})\r\n    ]);\r\n\r\n    if (!sender || !receiver) { return; }\r\n\r\n    if (sender.username === username) {\r\n      socket.emit(\"notification\", \"You can't add yourself as a friend.\");\r\n      return;\r\n    }\r\n    if (receiver.social.blocked.includes(sender.username)) {\r\n      socket.emit(\"notification\", \"This player has blocked you.\");\r\n      return;\r\n    }\r\n    if (sender.social.blocked.includes(username)) {\r\n      socket.emit(\"notification\", \"You have blocked this player.\");\r\n      return;\r\n    }\r\n    if (receiver.social.requests.includes(sender.username)) {\r\n      socket.emit(\"notification\", \"You have already sent the request to this player.\");\r\n      return;\r\n    }\r\n    if (sender.social.requests.includes(username)) {\r\n      socket.emit(\"notification\", \"This player has already sent you the request.\");\r\n      return;\r\n    }\r\n    if (sender.social.friends.includes(username)) {\r\n      socket.emit(\"notification\", \"This player is already your friend.\");\r\n      return;\r\n    }\r\n\r\n    const updatePlayer = await playersDb.updateOne({username}, {\r\n      $push: {\r\n        \"social.requests\": sender.username\r\n      }\r\n    });\r\n\r\n    if (!updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"notification\", \"Friend request sent.\");\r\n    ioServer.to(receiver.socketId).emit(\"addFriend\", {\r\n      username: sender.username\r\n    });\r\n  });\r\n};\r\n\r\nexport {addFriend};\r\n","import { chatsDb, playersDb } from \"apis/mongo\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst block: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"block\", async (params) => {\r\n    const {username} = params;\r\n    const [sender, receiver] = await Promise.all([\r\n      playersDb.findOne({socketId}),\r\n      playersDb.findOne({username})\r\n    ]);\r\n\r\n    if (!sender || !receiver) { return; }\r\n\r\n    const [isUpdatedSender, isUpdatedReceiver, isDeletedChat] = await Promise.all([\r\n      playersDb.updateOne({socketId}, {\r\n        $pull: {\r\n          \"social.friends\": username\r\n        },\r\n        $push: {\r\n          \"social.blocked\": username\r\n        }\r\n      }),\r\n      playersDb.updateOne({username}, {\r\n        $pull: {\r\n          \"social.friends\": sender.username\r\n        }\r\n      }),\r\n      chatsDb.deleteOne({\r\n        players: {\r\n          $all: [receiver.username, sender.username]\r\n        }\r\n      })\r\n    ]);\r\n\r\n    if (\r\n      !isUpdatedSender.modifiedCount ||\r\n      !isUpdatedReceiver.modifiedCount ||\r\n      !isDeletedChat.deletedCount\r\n    ) { return; }\r\n\r\n    socket.emit(\"blockSender\", {username});\r\n    ioServer.to(receiver.socketId).emit(\"blockReceiver\", {\r\n      username: sender.username\r\n    });\r\n  });\r\n};\r\n\r\nexport {block};\r\n","import { playersDb } from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst declineFriend: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"declineFriend\", async (params) => {\r\n    const {username} = params;\r\n    const $updatedPlayer = await playersDb.updateOne({socketId}, {\r\n      $pull: {\r\n        \"social.requests\": username\r\n      }\r\n    });\r\n\r\n    if (!$updatedPlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"declineFriend\", {username});\r\n  });\r\n};\r\n\r\nexport {declineFriend};\r\n","import {chatsDb, playersDb} from \"apis/mongo\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst sendChatMsg: SocketEvent = (socket): void => {\r\n  socket.on(\"sendChatMsg\", async (params) => {\r\n    const {sender, receiver, text, date} = params;\r\n    const $updateChat = await chatsDb.updateOne({\r\n      players: {$all: [sender, receiver]}\r\n    }, {\r\n      $push: {\r\n        messages: {sender, text, date}\r\n      }\r\n    });\r\n\r\n    if (!$updateChat.modifiedCount) { return; }\r\n\r\n    socket.emit(\"sendChatMsgSender\", {sender, receiver, text, date});\r\n\r\n    const $receiver = await playersDb.findOne({\r\n      username: receiver\r\n    });\r\n\r\n    if (!$receiver || !$receiver.socketId) { return; }\r\n\r\n    ioServer.to($receiver.socketId).emit(\"sendChatMsgReceiver\", {sender, text, date});\r\n  });\r\n};\r\n\r\nexport {sendChatMsg};\r\n","import { playersDb } from \"apis/mongo\";\r\nimport { getSocketIds } from \"helpers/player\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst setAvatar: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"setAvatar\", async (params) => {\r\n    const {avatarId} = params;\r\n    const player = await playersDb.findOneAndUpdate({socketId}, {\r\n      $set: {avatarId}\r\n    }, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!player.value) { return; }\r\n\r\n    const {username, social: {friends}} = player.value;\r\n    const socketIds = await getSocketIds(friends);\r\n\r\n    socket.emit(\"setAvatarSender\", {avatarId});\r\n    ioServer.to(socketIds).emit(\"setAvatarReceiver\", {username, avatarId});\r\n  });\r\n};\r\n\r\nexport {setAvatar};\r\n","import type {SocketEvent} from \"models\";\r\n\r\nconst signout: SocketEvent = (socket): void => {};\r\n\r\nexport {signout};\r\n","import { playersDb } from \"apis/mongo\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst unblock: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"unblock\", async (params) => {\r\n    const {username} = params;\r\n    const updatePlayer = await playersDb.updateOne({socketId}, {\r\n      $pull: {\r\n        \"social.blocked\": username\r\n      }\r\n    });\r\n\r\n    if (!updatePlayer.modifiedCount) { return; }\r\n\r\n    socket.emit(\"unblock\", {\r\n      friendname: username\r\n    });\r\n  });\r\n};\r\n\r\nexport {unblock};\r\n","import { chatsDb, playersDb } from \"apis/mongo\";\r\nimport { Player } from \"@som/shared/types/mongo\";\r\nimport { ioServer } from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst unfriend: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"unfriend\", async (params) => {\r\n    const {username} = params;\r\n    const sender = await playersDb.findOneAndUpdate({socketId}, {\r\n      $pull: {\r\n        \"social.friends\": username\r\n      } as Partial<Player>\r\n    }, {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!sender.value) { return; }\r\n\r\n    const receiver = await playersDb.findOneAndUpdate({username}, [{\r\n      $pull: {\r\n        \"social.friends\": sender.value.username\r\n      }\r\n    }], {\r\n      returnDocument: \"after\"\r\n    });\r\n\r\n    if (!receiver.value) { return; }\r\n\r\n    const deleteChat = await chatsDb.deleteOne({\r\n      players: {\r\n        $all: [username, sender.value.username]\r\n      }\r\n    });\r\n\r\n    if (!deleteChat.deletedCount) { return; }\r\n\r\n    socket.emit(\"unfriendSender\", {username});\r\n    ioServer.to(receiver.value.socketId).emit(\"unfriendReceiver\", {\r\n      username: sender.value.username\r\n    });\r\n  });\r\n};\r\n\r\nexport {unfriend};\r\n","import {playersDb} from \"apis/mongo\";\r\nimport {getSocketIds} from \"helpers/player\";\r\nimport {ioServer} from \"apis/server\";\r\nimport type {SocketEvent} from \"models\";\r\n\r\nconst updateStatus: SocketEvent = (socket): void => {\r\n  const socketId = socket.id;\r\n\r\n  socket.on(\"updateStatus\", async () => {\r\n    const $player = await playersDb.findOne({socketId});\r\n\r\n    if (!$player) { return; }\r\n\r\n    const {username, status, social} = $player;\r\n    const socketIds = await getSocketIds(social.friends);\r\n\r\n    ioServer.to(socketIds).emit(\"updateStatus\", {username, status});\r\n  });\r\n};\r\n\r\nexport {updateStatus};\r\n","import {acceptFriend} from \"./acceptFriend\";\r\nimport {addFriend} from \"./addFriend\";\r\nimport {block} from \"./block\";\r\nimport {declineFriend} from \"./declineFriend\";\r\nimport {sendChatMsg} from \"../sidenav/sendChatMsg\";\r\nimport {setAvatar} from \"./setAvatar\";\r\nimport {signout} from \"./signout\";\r\nimport {unblock} from \"./unblock\";\r\nimport {unfriend} from \"./unfriend\";\r\nimport {updateStatus} from \"../sidenav/updateStatus\";\r\n\r\nconst sidenav = [\r\n  acceptFriend,\r\n  addFriend,\r\n  block,\r\n  declineFriend,\r\n  sendChatMsg,\r\n  setAvatar,\r\n  signout,\r\n  unblock,\r\n  unfriend,\r\n  updateStatus\r\n];\r\n\r\nexport {sidenav};\r\n","import {auth} from \"./auth\";\r\nimport {client} from \"./client\";\r\nimport {game} from \"./game\";\r\nimport {sidenav} from \"./sidenav\";\r\n\r\nconst requests = [...auth, ...client, ...game, ...sidenav];\r\n\r\nexport {requests};\r\n","import settings from \"settings\";\r\nimport {httpServer, ioServer} from \"apis/server\";\r\nimport {requests} from \"requests\";\r\n\r\nprocess.on(\"unhandledRejection\", (reason, promise): void => {\r\n  console.log(`Unhandled rejection: ${reason}`);\r\n});\r\n\r\nprocess.on(\"uncaughtException\", (error, origin): void => {\r\n  console.log(`Uncaught Exception: ${error}`);\r\n});\r\n\r\nioServer.on(\"connection\", (socket): void => {\r\n  requests.forEach((request): void => request(socket));\r\n});\r\n\r\nhttpServer.listen(settings.server.port);\r\n"],"names":["playMinion"],"mappings":"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"}